ec.pkg("ec.index");"use strict";var Slider=function(b){this.i=0;this.objid=b.objid||null;this.preclassname=b.preclassname||".btn-prev";this.nextclassname=b.nextclassname||".btn-next";this.listname=b.listname||".grid-list";this.listitem=b.listitem||"li";this.shownum=b.shownum||5.5;this.type=b.type||1;this.autoplay=b.autoplay||false};Slider.prototype={init:function(){var c=this;var d=c.set();if(c.autoplay){c.auto(d)}else{c.next(d);c.pre(d)}},auto:function(f){var g=this,h=null;$(g.listname).find(g.listitem).eq(0).clone().appendTo(g.listname);var b=function(){g.i+=g.shownum;f.$grid.animate({"margin-top":"-"+g.i*f.itemHeight+"px"},500,"swing",function(){if(g.i>=f.len){g.i=0;f.$grid.css("margin-top",0)}})};if(g.autoplay){h=setInterval(b,2000);f.$grid.hover(function(){clearInterval(h)},function(){h=setInterval(b,2000)})}},set:function(){var o=this,l=$(o.objid+" "+o.listitem),j=$(o.objid+" "+o.listname),k=$(o.objid+" "+o.preclassname),q=$(o.objid+" "+o.nextclassname),n=l.length,m=l.outerWidth(),r=l.outerHeight(),p=Math.ceil(n/o.shownum);switch(o.type){default:case 1:j.css("width",(m+1)*n+"px");break;case 2:j.css("height",r*n+"px");break}return{$item:l,$grid:j,$pre:k,$next:q,len:n,itemWidth:m,itemHeight:r,num:p}},pre:function(c){var d=this;c.$pre.bind("click",function(){if($(this).hasClass("disabled")){return}d.i--;if(d.i-1<0){c.$pre.addClass("disabled")}c.$next.removeClass("disabled");switch(d.type){default:case 1:c.$grid.animate({"margin-left":d.i==0?0:parseInt(c.$grid.css("margin-left"))+c.itemWidth*d.shownum+"px"},500);break;case 2:c.$grid.animate({"margin-top":d.i==0?0:parseInt(c.$grid.css("margin-top"))+c.itemHeight*d.shownum+"px"},500)}})},next:function(c){var d=this;c.$next.bind("click",function(){if($(this).hasClass("disabled")){return}d.i++;c.$pre.removeClass("disabled");switch(d.type){default:case 1:if(d.shownum>1){if(d.i+1==c.num){var a=parseInt(c.$grid.css("margin-left"));var b=(c.len-d.i*parseInt(d.shownum)-1/2)*c.itemWidth;c.$grid.animate({"margin-left":a-b+"px"},500)}else{c.$grid.animate({"margin-left":"-"+d.i*c.itemWidth*parseInt(d.shownum)+"px"},500)}}else{c.$grid.animate({"margin-left":"-"+d.i*c.itemWidth*d.shownum+"px"},500)}break;case 2:c.$grid.animate({"margin-top":"-"+d.i*c.itemHeight*d.shownum+"px"},500);break}if(d.i+1==c.num){c.$next.addClass("disabled")}})}};ec.index.clickHref=function(b){ec.openWindow(b)};ec.index.sales=function(a){};ec.index.salesStatus=[];ec.index.salesCallBack=function(m,i){var o,q=[],s=new Date();s.setTime(ec.util.parseDate(ec.index.now));var t=function(c,d){var e=$(d),b=e.attr("data-skutype"),a=$(".channel-button",e);switch(parseInt(c,10)){case 0:a.html("\u9a6c\u4e0a\u5f00\u59cb").attr("title","\u9a6c\u4e0a\u5f00\u59cb");if(b==3||b==4){a.attr("class","channel-button-begin")}break;case 1:if(b==3){a.html("\u53bb\u770b\u770b").attr("title","\u53bb\u770b\u770b")}else{a.html("\u7acb\u5373\u62a2\u8d2d").attr("title","\u7acb\u5373\u62a2\u8d2d")}a.attr("class","channel-button");break;case 2:a.html("\u6d3b\u52a8\u7ed3\u675f").attr("title","\u6d3b\u52a8\u7ed3\u675f");if(b==2||b==3){a.attr("class","channel-button-end")}break}};for(var r=0;r<i.infoList.length;r+=1){o=m[r];q=i.infoList[r];$(".channel-button",o).css("visibility","");if(!q||!q.id){continue}if(q.status==1){if(q.startTime&&q.startTime>=s){q.status=0}if(q.endTime&&q.endTime<=s){q.status=2}}t(q.status,o);if(q.startTime||q.endTime||q.limitAmount>0){$(".p-countdown",o).show()}if(q.limitAmount>0){$(".p-quantity",o).html("\u9650<b>"+q.limitAmount+"</b>\u53f0").show()}var p=parseFloat($(o).attr("data-price"),10);if(q.price>0){if(parseInt(q.price)==q.price){$(".p-sale-price span, .p-price span",o).html((q.price));if(parseInt(p)==p){$(".economize",o).html(p-q.price)}else{$(".economize",o).html((p-q.price).toFixed(2))}}else{$(".p-sale-price span, .p-price span",o).html((q.price).toFixed(2));if(p-q.price==0){$(".economize",o).html("0")}else{$(".economize",o).html((p-q.price).toFixed(2))}}}$(".sale-quantity",o).html(q.saleAmount);if(q.status!=2&&(q.startTime||q.endTime)){var n=($(o).attr("data-block")=="slider")?true:false,l=[];if(q.startTime){l.push(ec.util.parseDate(q.startTime).format("yyyy-MM-dd HH:mm:ss"))}if(q.endTime){l.push(ec.util.parseDate(q.endTime).format("yyyy-MM-dd HH:mm:ss"))}ec.index.salesStatus[r]=q.status;ec.ui.countdown($(".p-time",o),{html:"<b>"+(n?"":"\u5269\u4f59")+"</b><ins><i>{#hours}</i><s></s></ins><em>\u65f6</em><ins><i>{#minutes}</i><s></s></ins><em>\u5206</em><ins><i>{#seconds}</i><s></s></ins><em>\u79d2</em>",now:s,times:l,index:r,callback:function(a){ec.index.salesStatus[a.index]++;t(ec.index.salesStatus[a.index],m[a.index])}})}}};ec.ready(function(){var l=$("#recommendSkuIds").val();ec.dapClick(300011501,{SKUID:l,load:"1"});if(ec.account.isLogin()){$("#cust_login_info").hide()}var i=ec.index.bigAd,j=ec.index.smallAd,k=ec.index.bigadShowTime,m,h,o=function(){var b=h.innerHeight();var c=m.innerHeight();var a=$("#search-bar-form").offset().top-c+b;var d=$("#search-bar-form").innerHeight();$(".autocomplete-w1").parent().hide();m.slideUp(1000,function(){if(j){h.show()}$(".autocomplete-w1").parent().css({top:(a+d+"px")});$(".autocomplete-w1").parent().show();ec.index.SCROLL_GET=ec.index.getscrollLayout()});if(n){clearTimeout(n)}},n;$("#top-banner-block").html(document.getElementById("top-banner").innerHTML);m=$("#top-banner-max");h=$("#top-banner-min");$("#top-banner-min-close").click(function(){$("#top-banner-block").hide();ec.index.SCROLL_GET=ec.index.getscrollLayout()});if(i){m.show();ec.index.SCROLL_GET=ec.index.getscrollLayout();$("#top-banner-max-toggle").click(o);n=setTimeout(o,k)}if(j&&!i){h.show();ec.index.SCROLL_GET=ec.index.getscrollLayout()}if(!j&&!i){ec.index.SCROLL_GET=ec.index.getscrollLayout()}$("body .layout .channel-pro-item").hover(function(){$(this).addClass("pro-info-hover")},function(){$(this).removeClass("pro-info-hover")});ec.index.sales("#main-sale-list .activity-list, #slider-sale-list .activity-list");ec.index.floatLayout()});ec.index.SCROLL_GET={};ec.index.getscrollLayout=function(){var e=$(".home-channel-container .layout .channel-title").closest(".layout"),g=$(".event-float-layout"),f=[],h=[];if(e.length==0||g.length==0){return false}e.each(function(b,a){h.push($(this).offset().top);f.push($(this).outerHeight())});return{scrollListHeight:f,scrollList:h,top:g.offset().top}};ec.index.floatLayout=function(){var D=$(".event-float-layout");if(D.length==0||ec.index.SCROLL_GET===false){return false}$("body").css({"min-width":"1200px","overflow-x":"hidden"});var A=$(".event-float"),r=$(".hungBar-top"),w=$(".home-channel-container .layout .channel-title").closest(".layout"),i=$(".home-channel-container"),s=$(".home-channel-container .layout .channel-title"),t="";D.find("ul").children().remove();function y(a){return $("<span/>").textS(a).html()}w.each(function(b,c){var a=y(s.eq(b).text());t+='<li><a data-id="'+b+'" href="javascript:;" onclick = "pushMsg(\''+ec.encodeForJS(a)+"');\">"+ec.autoEncodeAttr(a)+"</a></li>"});D.find("ul").append(t);D.bind("click",function(b){var c=$(b.target);if(c[0].nodeName.toLowerCase()==="a"){var a=parseInt(c.attr("data-id"));c.parent().addClass("hover").siblings().removeClass("hover");$("html,body").animate({scrollTop:ec.index.SCROLL_GET.scrollList[a]+"px"},400)}});var q=D.outerHeight(),z=A.offset(),B=z.left,C=$(window).height(),u=C/2-(q/2),v=w.length,x=true;if($.browser.msie&&parseInt($.browser.version)<=9){D.hide()}if($.browser.msie&&parseInt($.browser.version)<=7){x=false}else{$(window).scroll(function(){if(!x){return}var a=$(window).scrollTop();if(a>=C){r.fadeIn(80)}else{r.fadeOut(80)}if(a>=ec.index.SCROLL_GET.scrollList[0]-u){D.addClass("tool-Fixed");if($.browser.msie&&parseInt($.browser.version)>=8&&parseInt($.browser.version)<=9){D.show()}$.each(ec.index.SCROLL_GET.scrollList,function(c,b){if(a>=b-ec.index.SCROLL_GET.scrollListHeight[c]/2){D.find("li").eq(c).addClass("hover").siblings().removeClass("hover")}});if(a>=(ec.index.SCROLL_GET.scrollList[v-1]+200)){D.removeClass("tool-Fixed");if($.browser.msie&&parseInt($.browser.version)>=8&&parseInt($.browser.version)<=9){D.hide()}}}else{D.removeClass("tool-Fixed");if($.browser.msie&&parseInt($.browser.version)>=8&&parseInt($.browser.version)<=9){D.hide()}}})}$(window).resize(function(){$("body").css({"min-width":"1200px","overflow-x":"auto"})});if($(window).scrollTop()>0){$(window).trigger("scroll")}};function initSwiper(b,c){var e=$(b);var a=e.find(".swiper-slide").length;if(a>c){e.find(".swiper-button-next").removeClass("disabled")}else{e.find(".swiper-button-prev").addClass("disabled");e.find(".swiper-button-next").addClass("disabled")}var d=new Swiper(b,{slidesPerView:c,slidesPerGroup:c});e.find(".btn-prev").click(function(){d.swipePrev()});e.find(".btn-next").click(function(){d.swipeNext()})}$(document).ready(function(){new Slider({objid:"#notice",listname:".p-notice-list",shownum:1,type:2,autoplay:true}).init();var a=$(".bottomImage");if(a.attr("src")){a.show().bind("click",function(){var d=$("#adsArearLink").val();if(d!=null&&d.trim()!=""){var b=ec.openWindow(d);b.opener=null}})}var c=$(".grid-list .grid-items,.grid-promo-list .grid-items");c.hover(function(){$(this).addClass("current")},function(){$(this).removeClass("current")})});(function(){function a(){function e(){var f=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;return f}if(e()>1080){if($(".leftfloat")){$(".leftfloat").addClass("leftfloat-show")}}else{if($(".leftfloat")){$(".leftfloat").removeClass("leftfloat-show")}}}a();window.onscroll=function(){a()};function c(){if($(".leftfloat")){var e=($(window).width()-1200)/2-$(".leftfloat").width()-10,f=$(window).height()/2-$(".leftfloat").height()/2;$(".leftfloat").css("left",e);$(".leftfloat").css("top",f);setTimeout(c,100)}}c();window.onresize=function(){c()};var d=$(".home-channel-container .layout").eq(0).offset().top,b=$(".bottom-banner").height();$(window).scroll(function(){var e=b*(-1);$(".bottom-banner").css("bottom",e+"px");var f=$(window).scrollTop();if(f>=(d-b)){$(".footer-container").css("padding-bottom",b+"px");$(".bottom-banner").addClass("bm-0")}else{$(".bottom-banner").removeClass("bm-0");$(".footer-container").css("padding-bottom","0")}})})();function pushMemberMsg(b,a){if(a.indexOf("privilege")!=-1||a.indexOf("welcome.html")!=-1){}else{if(b.indexOf("\u6ce8\u518c")!=-1){}else{ec.account.afterLogin(function(){})}}ec.dapClick(300010801,{name:b,URL:a,click:"1"})}function pushFoolMsg(b,c,a){ec.dapClick(300011703,{index:b,category:c,URL:a,click:"1"})}function pushFoolChildrenMsg(b,c,d,a){ec.dapClick(300011701,{index:b,category:c,subCategory:d,URL:a,click:"1"})}$("#j-footer").on("click",".ad.fl a",function(){ec.dapClick(300011801,{name:$(this).find("img").attr("src"),URL:$(this).attr("href"),click:"1"})});function pushFoolAdvertMsg(c,d,a,b){ec.dapClick(300011702,{index:c,category:d.transHtmlAttribute(),ADID:a,URL:b,click:"1"})}$(".hover-list").find("li").find("a").click(function(){ec.dapClick(300010001,{buttonName:$(this).html(),click:"1"})});$("#web_popup_ads").find("a").click(function(){ec.dapClick(300010002,{ADID:$(this).find("img").attr("src"),URL:$(this).attr("href"),click:"1"})});function pushFoolGoodsMsg(d,h,e,b,g,f){var i,c;if(f=="13"){if(h<5){i=1;c=h+1}else{i=Math.floor(h/5)+1;c=h%5+1}}else{if(f=="12"){i=parseInt((h-1)/5)+1;c=parseInt((h-1)%5)+1}}var a=d.href;ec.dapClick(300011704,{index:e,category:b,SKUID:g,URL:a,row:""+i,"column ":""+c,click:"1"})}$(".top-banner-min").find("a").live("click",function(){var b=$(this).attr("title");var c;var d;var a;if($(this).attr("class")=="undefined"||$(this).attr("class")==""||$(this).attr("class")==null){c="1";d=$(this).find("img").attr("src");a=$(this).attr("href")}else{c="2";d="";a=""}ec.dapClick(300010102,{ADID:d,URL:a,type:c,click:"1"})});$(".top-banner-max").find("a").live("click",function(){var b=$(this).attr("title");var c;var d;var a;if($(this).attr("class")=="undefined"||$(this).attr("class")==""||$(this).attr("class")==null){c="1";d=$(this).find("img").attr("src");a=$(this).attr("href")}else{c="2";d="";a=""}ec.dapClick(300010101,{ADID:d,URL:a,type:c,click:"1"})});function pushMsg(a){ec.dapClick(300010001,{buttonName:a,click:"1"})}function pushMsgMenu1(a,d,c,b){ec.account.afterLogin(function(){ec.redirectTo("/priority")});ec.dapClick(d,{name:c,URL:b,location:a,click:"1"})}function pushMsgMenu(a,d,c,b){ec.dapClick(d,{name:c,URL:b,location:a,click:"1"})}function pushMsgNotice(a){ec.dapClick(300011001,{location:a,click:"1"})}$(".home-promo-list.clearfix li a").click(function(){ec.dapClick(300011201,{ADID:$(this).parent().find("img").attr("src"),URL:$(this).attr("href"),location:$(this).parent().index()+1,click:"1"})});function pushGoodsRecommendMsg(c,b,a){ec.dapClick(300011501,{SKUID:c,URL:b.href,location:a,click:"1"})}$(function(){function b(d){d.each(function(){var e=$(this);var f=e.attr("data-lazy-src");if(f){e.attr("src",f).removeAttr("data-lazy-src")}})}var a=false;function c(){var e=function(){b($("#j-goods-recommend img"));$("#j-goods-recommend .goods-rolling").each(function(){var f=$(this).attr("id");initSwiper("#"+f,5)})};var d=function(){b($("#j-goods-list img"));$("#j-goods-list .goods-rolling").each(function(){var f=$(this).attr("id");initSwiper("#"+f,6)});ec.index.SCROLL_GET=ec.index.getscrollLayout();ec.index.floatLayout();$(".home-banner-slideshow").each(function(){$(this).find("ul li a").each(function(f,g){$(g).click(function(){ec.dapClick("300012001",{index:$(g).closest(".home-banner-slideshow").attr("data-floor"),ADID:$(g).find("img").attr("src"),URL:$(g).attr("href"),location:f+1,click:1})})})})};if($("#loadIndexType").val()=="preview"){$("#j-goods-recommend").load("/goodsRecommendPreview.html",e);$("#j-goods-list").load("/goodslistpreview.html",d)}else{$("#j-goods-recommend").load("/goodsRecommend.html",e);$("#j-goods-list").load("/goodslist.html",d)}$("#j-footer").load("/footer.html",function(){$("#j-copyrightyear").text((new Date()).getFullYear());new Slider({objid:"#serverlink",listname:".service-list",listitem:"ol",shownum:1}).init();$(".fl").find("dd").find("a").bind("click",function(){var g="";g=this.href;var f=this.innerHTML;if(g==null||g==""){return}if(this.id=="tools-nav-service-robotim-button"){f="\u5728\u7ebf\u5ba2\u670d"}if(this.className=="service-btn btn-report"){f="\u4e0d\u826f\u4fe1\u606f\u4e3e\u62a5"}pushFootAdvertMsg(f,g)});$("#serverlink a").each(function(){var h=$(this);var g=h.attr("onclick")||"";g=g.toString();var f=g.match(/jump_link\('([^']+)'\)/);if(f&&f[1]){g=f[1];h.attr("target","_blank").attr("href",g)}})})}if($("body").height()<=$(window).height()&&!a){a=true;c()}$(window).scroll(function(){if(!a){a=true;c()}})});ec.popMarketingMessage={init:function(){var a=this;if(!ec.account.isLogin()){return false}$.ajax({url:openApiDomain+"/mcp/imm/getTargetMessage",dataType:"json",contentType:"text/plain",data:{lang:"zh-CN",country:mallCountry,portal:1,ownedPage:1},success:function(b){if(!b||!b.success||!b.pageMarketingMessageInfo||(!b.pageMarketingMessageInfo.custTitle&&!b.pageMarketingMessageInfo.custContent)){a.next();return false}a.showBox(b.pageMarketingMessageInfo,b.activityCode)},error:function(){a.next();return false}})},next:function(){if(ec.groupad&&"function"===typeof ec.groupad.init){ec.groupad.init()}},showBox:function(a,c){var h=this;var e="";var g={};var f={};a.interactButtonInfoList.forEach(function(i){if(i.buttonType===1){g.ok=i}else{if(i.buttonType===2){g.cancel=i}else{if(i.buttonType===3){g.notagain=i}}}});var d={boxid:"jb-marketing-message",boxclass:"ol_box_4",width:702,title:a.custTitle,okBtnName:g.ok.buttonTitle,cancelBtnName:g.cancel.buttonTitle,oncancel:function(){f.close();h.feedback(c,g.cancel)},onok:function(){f.close();h.feedback(c,g.ok)}};a.custContent=XSS.decode(a.custContent);if(a.picWebUrl){var b=new Image();b.src=XSS.decode(a.picWebUrl);b.onload=function(){var j=this.width,k=this.height;var i=Math.round(k/j*660);e+='<p><img src="'+a.picWebUrl+'" width="660" height="'+i+'"></p>';if(a.custContent){e+="<div>"+a.custContent+"</div>"}e='<div class="box-img" style="margin-top: 30px;">'+e+"</div>";f=new ec.box(e,d).open()}}else{e='<div class="box-img" style="margin-top: 20px; line-height: 27px; text-align: center;">'+a.custContent+"</div>";d.width=460;f=new ec.box(e,d).open()}},feedback:function(a,c,b,e){var d=this;$.ajax({url:openApiDomain+"/mcp/imm/userMessageFeedBack",method:"post",dataType:"json",contentType:"text/plain",data:JSON.stringify({lang:"zh-CN",country:mallCountry,portal:1,activityCode:a,buttonType:c.buttonType,unsubscribeFlag:b,contentJson:e}),complete:function(){if(c.buttonEvent===2){if(c.buttonJumpUrl){location.href=XSS.decode(c.buttonJumpUrl)}}else{if(c.buttonEvent===4){location.href="/member/order"}}d.next()}})}};
